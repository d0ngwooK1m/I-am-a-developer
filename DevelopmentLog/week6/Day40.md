# 항해 40일차

toggle에 id 즉 고유값을 넣어줘야 하는데 그렇지 않아서 충돌이 일어난 것으로 보임. 시간이 남으면 postId와 commentId로 전부 대체할 것

## 이번에 하면서 아쉬웠던 점(김동우)

1. 컴포넌트 잘 쪼개기:  
   이번에 포스트 컴포넌트의 뷰와 기능을 담당하였는데 간단한 구조일 줄 알고 하나의 컴포넌트로 잡고 작업을 시작했다.  
   그러나 작업이 진행되면 진행 될수록 디테일한 기능이 요구되고, 삼항 연산자들이 추가되면서 코드량이 걷잡을 수 없이 커져버렸다.  
   중간에 컴포넌트 분리를 하다가 오류로 인해 프로젝트가 지연될까 그대로 진행한 결과 Post.js코드는 600줄에 가까운 그야말로 스파게티 코드가 되고 말았다.  
   이러한 문제는 한 눈에 컴포넌트의 구성과 양을 파악할 만큼의 실력이 없어서라고 생각된다.  
   이를 방지하기 위해 앞으로는 1) 코드가 많아지고, 2) 작은 구조의 반복 이 발생하는 코드라면 즉시 컴포넌트를 쪼개는 식으로 작업을 진행해야겠다고 생각했다.  
   나중에 발생하는 내 코드를 내가 잘 못알아 보고, 보기도 싫어지는 사태가 발생하기 전에 말이다.

2. 스프레드 방식 useState에서 id 값을 제대로 주지 못한 점:
   삭제 모달이나 댓글 삭제 모달을 만들 때 동일한 위치의 컴포넌트에서 여러개의 useState를 활용하여 각각의 모달을 켜고 끄는 방식을 사용했다.  
   setModal 같은 상태 변화를 담당하는 변수를 함수와 스프레드 문법을 통해서 표현했는데, 그 때 값을 [id]: setModal[id] 같은 식으로 주었다.  
   처음엔 작동이 잘 돼서 문제가 없을 줄 알았는데, 나중에 배포를 하고 보니 개인이 여러개의 댓글을 달면 차례대로 삭제를 할 떄 모달이 뜨지 않는 오류가 발생했다.  
   다시 생각해보니 id값을 배열의 인덱스 값으로 주었는데, 이러다 보니 첫 댓글이 삭제가 되면 내용 변경이 리덕스에서 일어나면서 순서가 꼬여 발생하는 문제인 것 같다.  
   map의 key값에 unique한 값을 주는 것에만 신경을 썼지 map에 들어가는 모든 요소들은(특히 변경이 일어나는 요소들) unique한 값을 주어야 한다는 것을 알 수 있었다.

## Post 컴포넌트 구성 흐름(김동우)

1. 포스트 뷰 작성하기(1개)
2. API 문서 확인하고 약속한 방식으로 data.json 만들기
3. 로컬서버와 map을 통해서 여러개의 포스트가 생성되는지, 값들이 잘 들어가는지 확인
4. 삭제화면 모달창 만들기
5. 로그인 회원가입 통신 이후 포스트 삭제 기능 구현
6. 좋아요 기능 구현
7. 댓글 달기 클릭 시 해당 댓글 input에 포커스 되는 기능 구현 (spread useState와 current.focus() 기능 사용)
8. 댓글 추가 기능 구현
9. 댓글 삭제 기능 구현
10. 댓글 삭제 기능 구현
11. 링크 공유하기 기능 구현
12. 전체적인 기능 점검
